server {
    # Choose the port and host for the server
    listen 80;  # Port number
    server_name example.com;  # Optional: if you want a specific domain name to respond to this server block

    # Default server for this host:port (handles all unmatched requests)
    # If you want a default server without specifying the domain, use _ instead of the server_name.
    # server_name _;

    # Default error pages
    error_page 404 /404.html;

    location = /50x.html {
        root /usr/share/nginx/html;
    }

    # Limit client body size
    client_max_body_size 10M;  # Adjust as necessary for your file upload needs

    # Define route handling (example for a few routes)

    location /kapouet {
        # Define the directory from where files should be served
        root /tmp/www;

        # Turn off directory listing (default)
        autoindex off;

        # Serve a default file for directories (index.html)
        index index.html;

    }

    # Handle redirection on a specific route (e.g., redirect /old-page to /new-page)
    location /old-page {
        return 301 http://example.com/new-page;
    }

    # Setup file uploads (allowing file uploads and saving them)
    location /upload {
        client_max_body_size 20M;
        upload_pass /tmp/uploads;  # Where the files should be saved
        # Allow POST and GET for file uploads
        limit_except POST GET {
            deny all;
        }
    }

    # Execute CGI for PHP (or other scripts)
    location ~ \.php$ {
        root /tmp/www;
        fastcgi_pass unix:/var/run/php/php7.4-fpm.sock;  # Replace with your PHP-FPM socket
        fastcgi_index index.php;
        fastcgi_param SCRIPT_FILENAME /tmp/www$fastcgi_script_name;
        include fastcgi_params;
    }

    # Additional example for Python CGI
    location ~ \.py$ {
        root /tmp/www;
        fastcgi_pass unix:/var/run/python/python-cgi.sock;  # Replace with your Python CGI socket
        fastcgi_param SCRIPT_FILENAME /tmp/www$fastcgi_script_name;
        include fastcgi_params;
    }

    # Optionally set specific behavior for POST and GET requests:
    location /form {
        limit_except POST GET {
            deny all;
        }
    }

    # Default file when a directory is requested
    location / {
        index index.html;  # Default file to serve
    }

    # Logging configuration (optional)
    access_log /var/log/nginx/access.log;
    error_log /var/log/nginx/error.log;
}
